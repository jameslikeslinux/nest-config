---
nest::classes:
  - 'nest::firmware::opensbi'
  - 'nest::firmware::sophgo'
  - 'nest::firmware::zsbl'

nest::bootloader: u-root
nest::dtb_file: 'sophgo/mango-milkv-pioneer.dtb'
nest::kernel_defconfig: 'sophgo_mango_normal_defconfig'
nest::kernel_tag: 'sophgo/v6.1.80'
nest::opensbi_branch: 'sophgo/sg2042-dev-nest'
nest::soc: 'sg2042'
nest::uboot_tag: 'sophgo/v2023.10-rc2'
nest::uboot_defconfig: 'sophgo_sg2042_defconfig'

nest::kernel_cmdline:
  - 'console=ttyS0,115200n8'
  - 'console=tty0'
  - 'nvme_core.default_ps_max_latency_us=0' # workaround I/O timeouts

nest::kernel_config:
  # Tuning
  CONFIG_HZ_PERIODIC: n
  CONFIG_NO_HZ_IDLE: y
  CONFIG_PREEMPT_NONE: n
  CONFIG_PREEMPT_VOLUNTARY: y
  CONFIG_PM: y
  CONFIG_CPU_IDLE: y
  CONFIG_RISCV_SBI_CPUIDLE: y # not supported yet

  # Device drivers
  CONFIG_AQTION: m
  CONFIG_DRM_AMDGPU: m

  # Selects ZLIB_DEFLATE for ZFS
  CONFIG_CRYPTO_DEFLATE: m
